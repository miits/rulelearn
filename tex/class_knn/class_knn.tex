\documentclass{article}
\usepackage{booktabs}
\usepackage{pgfplots}
\pgfplotsset{compat=1.14}

\newcommand{\distplot}[4]{
\begin{tikzpicture}
\begin{axis}[
height = 70,
width = 0.8\textwidth,
xbar stacked,
axis y line = none,
axis x line = none,
xmin = 0,
nodes near coords,
every node near coord/.append style={yshift=10pt},
]
\addplot coordinates {(#1,0)};
\addplot coordinates {(#2,0)};
\addplot coordinates {(#3,0)};
\addplot coordinates {(#4,0)};
\end{axis}
\end{tikzpicture}
}

\newcommand{\distplotlegend}[4]{
\begin{tikzpicture}
\begin{axis}[
height = 70,
width = 0.8\textwidth,
xbar stacked,
axis y line = none,
axis x line = none,
xmin = 0,
nodes near coords,
every node near coord/.append style={yshift=10pt},
legend style={at={(0.5,-0.1)},anchor=north,draw=none,column sep=1ex,},
legend columns=-1
]
\addplot coordinates {(#1,0)};
\addplot coordinates {(#2,0)};
\addplot coordinates {(#3,0)};
\addplot coordinates {(#4,0)};
\addlegendentry{Safe};
\addlegendentry{Borderline};
\addlegendentry{Rare};
\addlegendentry{Outlier};
\end{axis}
\end{tikzpicture}
}
\begin{document}
balance\_scale

\begin{tabular}{lllr}
\toprule
Class & Union &  & Total \\ 
\midrule
4=>B & 4=>L & \distplot{0}{0}{4}{45} & 49 \\ 
4=>B & 4=>R & \distplot{0}{0}{4}{45} & 49 \\ 
4=>L & 4=>B & \distplot{200}{88}{0}{0} & 288 \\ 
4=>R & 4=>B & \distplotlegend{222}{66}{0}{0} & 288 \\ 
\bottomrule
\end{tabular}
breast-cancer\_nm

\begin{tabular}{lllr}
\toprule
Class & Union &  & Total \\ 
\midrule
7=>recurrence\_events & 7=>no\_recurrence\_events & \distplotlegend{36}{66}{44}{24} & 170 \\ 
\bottomrule
\end{tabular}
breast-w

\begin{tabular}{lllr}
\toprule
Class & Union &  & Total \\ 
\midrule
9=>malignant & 9=>benign & \distplotlegend{440}{32}{6}{4} & 482 \\ 
\bottomrule
\end{tabular}
breast-w\_nm

\begin{tabular}{lllr}
\toprule
Class & Union &  & Total \\ 
\midrule
9=>malignant & 9=>benign & \distplotlegend{436}{34}{8}{4} & 482 \\ 
\bottomrule
\end{tabular}
car

\begin{tabular}{lllr}
\toprule
Class & Union &  & Total \\ 
\midrule
6=>acc & 6=>unacc & \distplot{526}{118}{3}{13} & 660 \\ 
6=>good & 6=>acc & \distplot{93}{46}{2}{6} & 147 \\ 
6=>vgood & 6=>good & \distplotlegend{70}{20}{0}{0} & 90 \\ 
\bottomrule
\end{tabular}
cpu

\begin{tabular}{lllr}
\toprule
Class & Union &  & Total \\ 
\midrule
6=>0 & 6=>1 & \distplot{80}{20}{0}{0} & 100 \\ 
6=>1 & 6=>2 & \distplot{29}{23}{0}{1} & 53 \\ 
6=>2 & 6=>1 & \distplot{33}{15}{3}{2} & 53 \\ 
6=>2 & 6=>3 & \distplot{33}{15}{3}{2} & 53 \\ 
6=>3 & 6=>2 & \distplotlegend{49}{2}{2}{0} & 53 \\ 
\bottomrule
\end{tabular}
dataset1\_noid

\begin{tabular}{lllr}
\toprule
Class & Union &  & Total \\ 
\midrule
16=>2 & 16=>1 & \distplotlegend{280}{110}{18}{28} & 436 \\ 
\bottomrule
\end{tabular}
dataset3

\begin{tabular}{lllr}
\toprule
Class & Union &  & Total \\ 
\midrule
11=>1 & 11=>2 & \distplot{286}{164}{32}{4} & 486 \\ 
11=>2 & 11=>3 & \distplot{124}{149}{14}{9} & 296 \\ 
11=>3 & 11=>2 & \distplot{173}{158}{9}{17} & 357 \\ 
11=>3 & 11=>4 & \distplot{173}{158}{9}{17} & 357 \\ 
11=>4 & 11=>3 & \distplot{177}{108}{8}{15} & 308 \\ 
11=>5 & 11=>4 & \distplotlegend{84}{124}{18}{22} & 248 \\ 
\bottomrule
\end{tabular}
denbosch

\begin{tabular}{lllr}
\toprule
Class & Union &  & Total \\ 
\midrule
8=>1 & 8=>0 & \distplotlegend{72}{40}{0}{6} & 118 \\ 
\bottomrule
\end{tabular}
ERA\_n

\begin{tabular}{lllr}
\toprule
Class & Union &  & Total \\ 
\midrule
4=>1 & 4=>2 & \distplot{0}{94}{30}{60} & 184 \\ 
4=>2 & 4=>3 & \distplot{0}{39}{54}{49} & 142 \\ 
4=>3 & 4=>2 & \distplot{10}{56}{55}{60} & 181 \\ 
4=>3 & 4=>4 & \distplot{10}{56}{55}{60} & 181 \\ 
4=>4 & 4=>3 & \distplot{0}{57}{58}{57} & 172 \\ 
4=>4 & 4=>5 & \distplot{0}{57}{58}{57} & 172 \\ 
4=>5 & 4=>4 & \distplot{0}{37}{53}{68} & 158 \\ 
4=>5 & 4=>6 & \distplot{0}{37}{53}{68} & 158 \\ 
4=>6 & 4=>5 & \distplot{0}{36}{28}{54} & 118 \\ 
4=>6 & 4=>7 & \distplot{0}{36}{28}{54} & 118 \\ 
4=>7 & 4=>6 & \distplot{0}{26}{23}{39} & 88 \\ 
4=>8 & 4=>7 & \distplot{0}{36}{7}{37} & 80 \\ 
4=>9 & 4=>8 & \distplotlegend{0}{28}{2}{6} & 36 \\ 
\bottomrule
\end{tabular}
ESL\_n

\begin{tabular}{lllr}
\toprule
Class & Union &  & Total \\ 
\midrule
4=>1 & 4=>2 & \distplot{0}{0}{0}{4} & 4 \\ 
4=>2 & 4=>3 & \distplot{12}{6}{0}{8} & 26 \\ 
4=>3 & 4=>4 & \distplot{24}{33}{16}{17} & 90 \\ 
4=>4 & 4=>5 & \distplot{37}{51}{6}{6} & 100 \\ 
4=>5 & 4=>4 & \distplot{59}{44}{6}{7} & 116 \\ 
4=>5 & 4=>6 & \distplot{59}{44}{6}{7} & 116 \\ 
4=>6 & 4=>5 & \distplot{89}{36}{5}{5} & 135 \\ 
4=>7 & 4=>6 & \distplot{43}{67}{15}{22} & 147 \\ 
4=>8 & 4=>7 & \distplot{2}{14}{14}{12} & 42 \\ 
4=>9 & 4=>8 & \distplotlegend{0}{0}{0}{8} & 8 \\ 
\bottomrule
\end{tabular}
housing

\begin{tabular}{lllr}
\toprule
Class & Union &  & Total \\ 
\midrule
13=>1 & 13=>2 & \distplot{94}{25}{0}{8} & 127 \\ 
13=>2 & 13=>1 & \distplot{36}{66}{14}{8} & 124 \\ 
13=>2 & 13=>3 & \distplot{36}{66}{14}{8} & 124 \\ 
13=>3 & 13=>2 & \distplot{28}{90}{7}{6} & 131 \\ 
13=>4 & 13=>3 & \distplotlegend{150}{64}{24}{10} & 248 \\ 
\bottomrule
\end{tabular}
LEV\_n

\begin{tabular}{lllr}
\toprule
Class & Union &  & Total \\ 
\midrule
4=>0 & 4=>1 & \distplot{82}{22}{30}{52} & 186 \\ 
4=>1 & 4=>2 & \distplot{235}{253}{69}{96} & 653 \\ 
4=>3 & 4=>2 & \distplot{108}{195}{59}{59} & 421 \\ 
4=>4 & 4=>3 & \distplotlegend{0}{18}{22}{14} & 54 \\ 
\bottomrule
\end{tabular}
SWD\_n

\begin{tabular}{lllr}
\toprule
Class & Union &  & Total \\ 
\midrule
10=>2 & 10=>3 & \distplot{0}{22}{22}{20} & 64 \\ 
10=>3 & 10=>4 & \distplot{256}{273}{103}{104} & 736 \\ 
10=>5 & 10=>4 & \distplotlegend{108}{204}{62}{60} & 434 \\ 
\bottomrule
\end{tabular}
windsor

\begin{tabular}{lllr}
\toprule
Class & Union &  & Total \\ 
\midrule
10=>0 & 10=>1 & \distplot{100}{122}{26}{26} & 274 \\ 
10=>1 & 10=>2 & \distplot{9}{80}{31}{18} & 138 \\ 
10=>2 & 10=>1 & \distplot{4}{85}{27}{20} & 136 \\ 
10=>3 & 10=>2 & \distplotlegend{132}{104}{12}{22} & 270 \\ 
\bottomrule
\end{tabular}
\end{document}
